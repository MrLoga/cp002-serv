(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{f1da:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("q-page",[e("q-tabs",{staticClass:"bg-teal text-white shadow-2",attrs:{"inline-label":"","active-color":"white","indicator-color":"white"},model:{value:t.convertTab,callback:function(o){t.convertTab=o},expression:"convertTab"}},[e("q-tab",{attrs:{name:"sell",label:t.$t("Exchange")}}),e("q-tab",{attrs:{name:"buy",label:t.$t("Get")}})],1),e("q-tab-panels",{attrs:{animated:""},model:{value:t.convertTab,callback:function(o){t.convertTab=o},expression:"convertTab"}},[e("q-tab-panel",{attrs:{name:"sell"}},[e("form",{staticClass:"q-gutter-md",on:{submit:function(o){o.preventDefault(),o.stopPropagation(),t.confirmConvert=!0}}},[e("q-select",{attrs:{outlined:"",label:t.$t("Coin you have"),"bottom-slots":"",behavior:"dialog","display-value":t.coinSymbol&&t.coinSymbol.coin?"<b>"+t.coinSymbol.coin+"</b> ("+t.coinSymbol.amountPretty+")":"",options:t.balancesSelect,hint:t.coinSymbol&&t.coinSymbol.coin?t.coinsJSON[t.coinSymbol.coin].name:""},scopedSlots:t._u([{key:"option",fn:function(o){return[e("q-item",t._g(t._b({},"q-item",o.itemProps,!1),o.itemEvents),[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(o.opt.coin),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(o.opt.coin.charAt(0).toUpperCase())+"\n                ")])],1),e("q-item-section",[e("q-item-label",[e("b",[t._v(t._s(o.opt.coin))]),t._v(" ("+t._s(o.opt.amountPretty)+")")]),e("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(t.coinsJSON[o.opt.coin].name))])],1)],1)]}}]),model:{value:t.coinSymbol,callback:function(o){t.coinSymbol=o},expression:"coinSymbol"}}),e("q-input",{attrs:{type:"number",step:"any",outlined:"",clearable:"",debounce:"250",label:t.$t("Amount"),error:t.amountIsError,"error-message":t.amountErrorMsg},scopedSlots:t._u([{key:"after",fn:function(){return[e("q-btn",{attrs:{round:"","no-caps":"",flat:"",label:"Max"},on:{click:t.maxAmountSell}})]},proxy:!0}]),model:{value:t.amountString,callback:function(o){t.amountString=o},expression:"amountString"}}),e("div",{staticClass:"q-mt-none",staticStyle:{"text-align":"center"}},[e("q-icon",{attrs:{name:"arrow_downward",size:"md"}})],1),e("q-select",{attrs:{outlined:"",label:t.$t("Coin you want"),"use-input":"","input-debounce":"250",behavior:"dialog","display-value":t.coinSymbolTo&&t.coinSymbolTo.value?"<b>"+t.coinSymbolTo.value+"</b> (crr: "+t.coinSymbolTo.crr+")":"",options:t.options,hint:t.coinSymbolTo&&t.coinSymbolTo.value?t.coinSymbolTo.name:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n                "+t._s(t.$t("No results"))+"\n              ")])],1)]},proxy:!0},{key:"option",fn:function(o){return[e("q-item",t._g(t._b({},"q-item",o.itemProps,!1),o.itemEvents),[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(o.opt.symbol),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(o.opt.symbol.charAt(0).toUpperCase())+"\n                ")])],1),e("q-item-section",[e("q-item-label",[e("b",[t._v(t._s(o.opt.symbol))]),t._v(" (crr: "+t._s(o.opt.crr)+")")]),e("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(o.opt.name))])],1)],1)]}}]),model:{value:t.coinSymbolTo,callback:function(o){t.coinSymbolTo=o},expression:"coinSymbolTo"}}),e("div",[e("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!t.txReady,label:t.$t("Exchange")}})],1),0!=t.resultSell?e("div",[e("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.$t("You will get")))]),t._v(" \n          "),e("span",{staticClass:"text-h6"},[t._v(t._s(t.pretty(t.resultSell,3)))]),t._v(" \n          "),e("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.coinSymbolTo.value.toUpperCase()))])]):t._e(),!t.txReady&&t.txError?e("div",{staticClass:"text-negative"},[t._v("\n          "+t._s(t.txError)+"\n        ")]):t._e(),e("div",{class:"text-grey-7 "+(0!=t.resultSell?"q-mt-none":"")},[t._v("\n          "+t._s(t.$t("Transaction fee"))+": "+t._s(t.feeSellBase)+" BIP\n        ")])],1)]),e("q-tab-panel",{attrs:{name:"buy"}},[e("form",{staticClass:"q-gutter-md",on:{submit:function(o){o.preventDefault(),o.stopPropagation(),t.confirmConvert=!0}}},[e("q-select",{attrs:{outlined:"",label:t.$t("Coin you want"),"use-input":"","input-debounce":"250",behavior:"dialog","display-value":t.coinSymbolTo&&t.coinSymbolTo.value?"<b>"+t.coinSymbolTo.value+"</b> (crr: "+t.coinSymbolTo.crr+")":"",options:t.options,hint:t.coinSymbolTo&&t.coinSymbolTo.value?t.coinSymbolTo.name:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[e("q-item",[e("q-item-section",{staticClass:"text-grey"},[t._v("\n                "+t._s(t.$t("No results"))+"\n              ")])],1)]},proxy:!0},{key:"option",fn:function(o){return[e("q-item",t._g(t._b({},"q-item",o.itemProps,!1),o.itemEvents),[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(o.opt.symbol),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(o.opt.symbol.charAt(0).toUpperCase())+"\n                ")])],1),e("q-item-section",[e("q-item-label",[e("b",[t._v(t._s(o.opt.symbol))]),t._v(" (crr: "+t._s(o.opt.crr)+")")]),e("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(o.opt.name))])],1)],1)]}}]),model:{value:t.coinSymbolTo,callback:function(o){t.coinSymbolTo=o},expression:"coinSymbolTo"}}),e("q-input",{attrs:{type:"number",outlined:"",debounce:"250",label:t.$t("Amount")},model:{value:t.amountString,callback:function(o){t.amountString=t._n(o)},expression:"amountString"}}),e("div",{staticClass:"q-mt-none",staticStyle:{"text-align":"center"}},[e("q-icon",{attrs:{name:"arrow_upward",size:"md"}})],1),e("q-select",{attrs:{outlined:"",label:t.$t("Coin you have"),"bottom-slots":"",behavior:"dialog","display-value":t.coinSymbol&&t.coinSymbol.coin?"<b>"+t.coinSymbol.coin+"</b> ("+t.coinSymbol.amountPretty+")":"",options:t.balancesSelect,hint:t.coinSymbol&&t.coinSymbol.coin?t.coinsJSON[t.coinSymbol.coin].name:""},scopedSlots:t._u([{key:"option",fn:function(o){return[e("q-item",t._g(t._b({},"q-item",o.itemProps,!1),o.itemEvents),[e("q-item-section",{attrs:{avatar:""}},[e("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(o.opt.coin),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(o.opt.coin.charAt(0).toUpperCase())+"\n                ")])],1),e("q-item-section",[e("q-item-label",[e("b",[t._v(t._s(o.opt.coin))]),t._v(" ("+t._s(o.opt.amountPretty)+")")]),e("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(t.coinsJSON[o.opt.coin].name))])],1)],1)]}}]),model:{value:t.coinSymbol,callback:function(o){t.coinSymbol=o},expression:"coinSymbol"}}),e("div",[e("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!t.txReady,label:t.$t("Exchange")}})],1),0!=t.resultBuy?e("div",[e("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.$t("You will pay")))]),t._v(" \n          "),e("span",{staticClass:"text-h6"},[t._v(t._s(t.pretty(t.resultBuy,3)))]),t._v(" \n          "),e("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.coinSymbol.value.toUpperCase()))])]):t._e(),!t.txReady&&t.txError?e("div",{staticClass:"text-negative"},[t._v("\n          "+t._s(t.txError)+"\n        ")]):t._e(),e("div",{class:"text-grey-7 "+(0!=t.resultBuy?"q-mt-none":"")},[t._v("\n          Transaction fee: "+t._s(t.feeBuyBase)+" BIP\n        ")])],1)])],1),t.txReady?e("q-dialog",{attrs:{persistent:"","full-width":"","transition-show":"scale","transition-hide":"scale"},model:{value:t.confirmConvert,callback:function(o){t.confirmConvert=o},expression:"confirmConvert"}},[e("q-card",[e("q-card-section",{staticStyle:{"text-align":"center"}},[e("div",{staticClass:"text-h5 text-grey-7"},[t._v(t._s(t.$t("Youre Exchange")))]),e("div",{staticClass:"text-h5"},[t._v(t._s(t.numberSpaces(t.pretty(t.amount,3)))+" "),e("span",{staticClass:"text-h6"},[t._v(t._s(t.coinSymbol.value))])]),e("div",{staticClass:"text-grey-7"},[t._v(t._s(t.$t("to")))]),e("div",{staticClass:"text-h5"},[t._v(t._s(t.numberSpaces(t.pretty("sell"===t.convertTab?t.resultSell:t.resultBuy,3)))+" "),e("span",{staticClass:"text-h6"},[t._v(t._s(t.coinSymbolTo.value))])])]),e("q-separator",{attrs:{inset:""}}),e("q-card-actions",{attrs:{align:"around"}},[e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Cancel"),color:"red"}}),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Accept"),color:"primary"},on:{click:t.senderConvert}})],1)],1)],1):t._e()],1)},a=[],i=(e("8e6e"),e("8a81"),e("ac6a"),e("cadf"),e("456d"),e("6b54"),e("06db"),e("a481"),e("c47a")),s=e.n(i),l=e("158a"),c=e("6ff6"),r=e("2f62"),u=e("ed08"),m=e("9dcd"),b=e.n(m);function y(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,n)}return e}function p(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?y(Object(e),!0).forEach((function(o){s()(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):y(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}var v={name:"Convert",components:{},data:function(){return{convertTab:"sell",coinSymbol:null,coinSymbolTo:null,amountString:null,amountIsError:!1,amountErrorMsg:null,amount:null,options:[],confirmConvert:!1,txReady:!1,txError:"",resultBuy:0,resultSell:0,feeBuy:Object(l["e"])(c["b"]),feeBuyBase:Object(l["e"])(c["b"]),feeSell:Object(l["e"])(c["d"]),feeSellBase:Object(l["e"])(c["d"])}},computed:p({},Object(r["c"])({coinsSelect:function(t){return t.api.coinsSelect},coinsJSON:function(t){return t.api.coinsJSON},minterGate:function(t){return t.wallet.minterGate}}),{},Object(r["b"])(["balancesSelect"])),methods:{Big:function(t){return b()(t)},pretty:function(t,o){return Object(u["b"])(t,o)},numberSpaces:function(t){return Object(u["a"])(t)},stringToHSL:function(t){return Object(u["d"])(t)},filterFn:function(t,o){var e=this;o(""!==t?function(){var o=t.toLowerCase();e.options=e.coinsSelect.filter((function(t){return t.symbol.toLowerCase().indexOf(o)>-1}))}:function(){e.options=e.coinsSelect})},maxAmountSell:function(){if(!this.coinSymbol||!this.coinSymbol.value)return!1;this.amount=new b.a(this.coinSymbol.amount.replace(",",".")),"BIP"===this.coinSymbol.value?this.amount=new b.a(this.coinSymbol.amount.replace(",",".")).minus(this.feeSellBase):this.amount=new b.a(this.coinSymbol.amount.replace(",",".")),this.amountString=this.amount.toString()},senderConvert:function(){var t=this,o={type:this.convertTab,data:{coinToSell:this.coinSymbol.value,coinToBuy:this.coinSymbolTo.value},feeCoinSymbol:"BIP",message:""};"buy"===this.convertTab?o.data.valueToBuy=this.amount.toString():"sell"===this.convertTab&&(o.data.valueToSell=this.amount.toString()),this.$store.dispatch("SENDER",o).then((function(o){t.$q.notify({message:t.$t("Transaction successful"),icon:"tag_faces",color:"teal"}),t.$store.dispatch("FETCH_BALANCE"),t.clearAll()})).catch((function(o){t.$q.notify({message:o,icon:"report_problem",color:"negative"})}))},clearAll:function(){this.coinSymbol=null,this.coinSymbolTo=null,this.amount=null,this.amountString=null,this.options=[],this.confirmConvert=!1,this.resultBuy=0,this.resultSell=0,this.txReady=!1,this.txError="",this.coinSymbol||(this.coinSymbol=this.balancesSelect[0])},calcBuy:function(){var t=this;this.txReady=!1,this.txError="",this.amountIsError=!1,this.amountErrorMsg=null,this.resultBuy=0,this.resultSell=0;var o=this.amountString;if(this.amount=b()(o?o.toString().replace(",","."):0),"sell"===this.convertTab&&this.amount&&this.coinSymbol&&this.amount.gt(this.coinSymbol.amount)&&(this.txReady=!1,this.amountIsError=!0,this.amountErrorMsg=this.$t("Not enough")+" ".concat(this.pretty(this.amount.minus(this.coinSymbol.amount),3)," ").concat(this.coinSymbol.value),this.txError=this.$t("Not enough")+" ".concat(this.pretty(this.amount.minus(this.coinSymbol.amount),3)," ").concat(this.coinSymbol.value)),this.coinSymbol&&this.coinSymbolTo&&this.coinSymbol.value===this.coinSymbolTo.value)this.txReady=!1,this.txError=this.$t("Сhoose different coins");else if(this.amount&&this.amount.gt(0)&&this.coinSymbol&&this.coinSymbol.value&&this.coinSymbolTo){var e="buy"===this.convertTab?"estimateCoinBuy":"estimateCoinSell",n={coinToSell:this.coinSymbol.value,coinToBuy:this.coinSymbolTo.value};"buy"===this.convertTab?n.valueToBuy=this.amount:"sell"===this.convertTab&&(n.valueToSell=this.amount),this.minterGate[e](n).then((function(o){t.feeSell=o.commission,t.resultSell=o.will_get,t.resultBuy=o.will_pay,t.txReady=!0,"buy"===t.convertTab&&(b()(t.resultBuy).lt(t.coinSymbol.amount)?t.txReady=!0:(t.txReady=!1,t.txError=t.$t("Not enough")+" ".concat(t.pretty(b()(t.resultBuy).minus(t.coinSymbol.amount),3)," ").concat(t.coinSymbol.value),t.amountIsError=!0,t.amountErrorMsg=t.$t("Not enough")+" ".concat(t.pretty(b()(t.resultBuy).minus(t.coinSymbol.amount),3)," ").concat(t.coinSymbol.value)))})).catch((function(o){t.txReady=!1,t.txError=o.log}))}else this.txReady=!1}},created:function(){this.coinSymbol||(this.coinSymbol=this.balancesSelect[0])},watch:{amountString:function(t){this.calcBuy()},coinSymbol:function(){this.calcBuy()},coinSymbolTo:function(){this.calcBuy()},convertTab:function(){this.clearAll()}}},S=v,h=e("2877"),d=e("eebe"),f=e.n(d),_=e("9989"),g=e("429b"),x=e("7460"),T=e("adad"),q=e("823b"),C=e("ddd8"),w=e("66e5"),E=e("4074"),B=e("cb32"),O=e("0170"),$=e("27f9"),P=e("9c40"),k=e("0016"),j=e("24e8"),Q=e("f09f"),A=e("a370"),N=e("eb85"),R=e("4b7e"),I=e("7f67"),L=Object(h["a"])(S,n,a,!1,null,null,null);o["default"]=L.exports;f()(L,"components",{QPage:_["a"],QTabs:g["a"],QTab:x["a"],QTabPanels:T["a"],QTabPanel:q["a"],QSelect:C["a"],QItem:w["a"],QItemSection:E["a"],QAvatar:B["a"],QItemLabel:O["a"],QInput:$["a"],QBtn:P["a"],QIcon:k["a"],QDialog:j["a"],QCard:Q["a"],QCardSection:A["a"],QSeparator:N["a"],QCardActions:R["a"]}),f()(L,"directives",{ClosePopup:I["a"]})}}]);