(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{8973:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-select",{attrs:{outlined:"",label:t.$t("Сhoose coin"),"bottom-slots":"","bg-color":"white",behavior:"dialog",options:t.balanceSelect,hint:t.coin?t.coinsInfo[t.coin.value].name:""},scopedSlots:t._u([{key:"option",fn:function(e){return[n("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(e.opt.value),attrs:{"text-color":"white"}},[t._v("\n          "+t._s(e.opt.value.charAt(0).toUpperCase())+"\n        ")])],1),n("q-item-section",[n("q-item-label",{domProps:{innerHTML:t._s(e.opt.label)}}),n("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(t.coinsInfo[e.opt.value].name))])],1)],1)]}}]),model:{value:t.coin,callback:function(e){t.coin=e},expression:"coin"}})},a=[],i=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("c47a")),s=n.n(i),r=n("2f62"),c=n("ed08");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m={name:"BalanceSelect",props:{value:Object},data:function(){return{coin:this.value}},created:function(){},methods:{stringToHSL:function(t){return Object(c["e"])(t)},handleInput:function(){this.$emit("input",this.coin)}},computed:u({},Object(r["b"])(["balanceSelect","coinsInfo"])),watch:{coin:function(){this.handleInput()},value:function(t){this.coin=t}}},p=m,v=n("2877"),b=n("eebe"),h=n.n(b),f=n("ddd8"),d=n("66e5"),g=n("4074"),_=n("cb32"),y=n("0170"),C=Object(v["a"])(p,o,a,!1,null,null,null);e["a"]=C.exports;h()(C,"components",{QSelect:f["a"],QItem:d["a"],QItemSection:g["a"],QAvatar:_["a"],QItemLabel:y["a"]})},f1da:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",[n("q-tabs",{staticClass:"bg-teal text-white shadow-2",attrs:{"inline-label":"","active-color":"white","indicator-color":"white"},model:{value:t.convertTab,callback:function(e){t.convertTab=e},expression:"convertTab"}},[n("q-tab",{attrs:{name:"sell",label:t.$t("Exchange")}}),n("q-tab",{attrs:{name:"buy",label:t.$t("Get")}})],1),n("q-tab-panels",{staticClass:"bg-grey-2",attrs:{animated:""},model:{value:t.convertTab,callback:function(e){t.convertTab=e},expression:"convertTab"}},[n("q-tab-panel",{attrs:{name:"sell"}},[n("form",{staticClass:"q-gutter-md",on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.confirmConvert=!0}}},[n("BalanceSelect",{model:{value:t.coin,callback:function(e){t.coin=e},expression:"coin"}}),n("q-input",{attrs:{type:"number",step:"any",outlined:"",clearable:"",debounce:"250","bg-color":"white",label:t.$t("Amount"),error:t.amountIsError,"error-message":t.amountErrorMsg},scopedSlots:t._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{round:"","no-caps":"",flat:"",label:"Max"},on:{click:t.maxAmount}})]},proxy:!0}]),model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),n("div",{staticClass:"text-center q-mt-none"},[n("q-icon",{attrs:{name:"arrow_downward",color:"text-grey-7",size:"md"}})],1),n("CoinsSelect",{model:{value:t.coinTo,callback:function(e){t.coinTo=e},expression:"coinTo"}}),n("div",{staticClass:"q-mt-md"},[n("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!t.validate,label:t.$t("Exchange")}})],1),t.validate&&0!=t.resultSell?n("div",[n("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.$t("You will get")))]),t._v(" \n          "),n("span",{staticClass:"text-h6"},[t._v(t._s(t.prettyNumber(t.resultSell,3)))]),t._v(" \n          "),n("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.coinTo.value.toUpperCase()))])]):t._e(),t.validate?t._e():n("div",{staticClass:"text-negative"},[t._v(t._s(t.validateError))]),n("div",{staticClass:"text-grey-7 q-mt-none"},[t._v("\n          "+t._s(t.$t("Transaction fee"))+": "+t._s(t.prettyNumber(t.commission,5))+" "+t._s(t.commissionCoin)+"\n        ")])],1)]),n("q-tab-panel",{attrs:{name:"buy"}},[n("form",{staticClass:"q-gutter-md",on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.confirmConvert=!0}}},[n("CoinsSelect",{model:{value:t.coinTo,callback:function(e){t.coinTo=e},expression:"coinTo"}}),n("q-input",{attrs:{type:"number",step:"any",outlined:"",clearable:"",debounce:"250","bg-color":"white",label:t.$t("Amount"),error:t.amountIsError,"error-message":t.amountErrorMsg},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),n("div",{staticClass:"text-center q-mt-none"},[n("q-icon",{attrs:{name:"arrow_upward",color:"text-grey-7",size:"md"}})],1),n("BalanceSelect",{model:{value:t.coin,callback:function(e){t.coin=e},expression:"coin"}}),n("div",[n("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!t.validate,label:t.$t("Exchange")}})],1),t.validate&&0!=t.resultBuy?n("div",[n("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.$t("You will pay")))]),t._v(" \n          "),n("span",{staticClass:"text-h6"},[t._v(t._s(t.prettyNumber(t.resultBuy,5)))]),t._v(" \n          "),n("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.coin.value.toUpperCase()))])]):t._e(),t.validate?t._e():n("div",{staticClass:"text-negative"},[t._v(t._s(t.validateError))]),n("div",{staticClass:"text-grey-7 q-mt-none"},[t._v("\n          "+t._s(t.$t("Transaction fee"))+": "+t._s(t.prettyNumber(t.commission,5))+" "+t._s(t.commissionCoin)+"\n        ")])],1)])],1),t.validate?n("q-dialog",{attrs:{persistent:"","full-width":"","transition-show":"scale","transition-hide":"scale"},model:{value:t.confirmConvert,callback:function(e){t.confirmConvert=e},expression:"confirmConvert"}},[n("q-card",["sell"===t.convertTab?n("q-card-section",{staticClass:"text-center"},[n("div",{staticClass:"text-h5 text-grey-7 q-mb-md"},[t._v(t._s(t.$t("Youre Exchange")))]),n("div",{staticClass:"text-h5"},[t._v(t._s(t.prettyNumber(t.amountBig.toString(),3))+" "),n("span",{staticClass:"text-h6"},[t._v(t._s(t.coin.value))])]),n("div",{staticClass:"text-grey-7"},[t._v(t._s(t.$t("to")))]),n("div",{staticClass:"text-h5"},[t._v(t._s(t.prettyNumber(t.resultSell,3))+" "),n("span",{staticClass:"text-h6"},[t._v(t._s(t.coinTo.value))])])]):n("q-card-section",{staticClass:"text-center"},[n("div",{staticClass:"text-h5 text-grey-7 q-mb-md"},[t._v(t._s(t.$t("Youre Exchange")))]),n("div",{staticClass:"text-h5"},[t._v(t._s(t.prettyNumber(t.resultBuy,3))+" "),n("span",{staticClass:"text-h6"},[t._v(t._s(t.coin.value))])]),n("div",{staticClass:"text-grey-7"},[t._v(t._s(t.$t("to")))]),n("div",{staticClass:"text-h5"},[t._v(t._s(t.prettyNumber(t.amount,3))+" "),n("span",{staticClass:"text-h6"},[t._v(t._s(t.coinTo.value))])])]),n("q-separator",{attrs:{inset:""}}),n("q-card-actions",{attrs:{align:"around"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Cancel"),color:"red"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Accept"),color:"primary"},on:{click:t.senderConvert}})],1)],1)],1):t._e()],1)},a=[],i=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("456d"),n("c47a")),s=n.n(i),r=(n("a481"),n("967e")),c=n.n(r),l=(n("96cf"),n("fa84")),u=n.n(l),m=(n("6b54"),n("06db"),n("158a")),p=n("b862"),v=n("2f62"),b=n("ed08"),h=n("9dcd"),f=n.n(h),d=n("8973"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-select",{attrs:{outlined:"",label:t.$t("Coin you want"),"use-input":"","input-debounce":"250","bg-color":"white",behavior:"dialog",options:t.options,hint:t.coin?t.coinsInfo[t.coin.value].name:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[t._v("\n        "+t._s(t.$t("No results"))+"\n      ")])],1)]},proxy:!0},{key:"option",fn:function(e){return[n("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(e.opt.value),attrs:{"text-color":"white"}},[n("span",{staticClass:"balance__coin-letter"},[t._v(t._s(e.opt.value.charAt(0).toUpperCase()))])])],1),n("q-item-section",[n("q-item-label",[n("b",[t._v(t._s(e.opt.value))]),t._v(" (crr: "+t._s(e.opt.crr)+")")]),n("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(t.coinsInfo[e.opt.value].name))])],1)],1)]}}]),model:{value:t.coin,callback:function(e){t.coin=e},expression:"coin"}})},_=[];function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var x={name:"CoinsSelect",props:{value:Object},data:function(){return{coin:this.value,options:[]}},created:function(){this.options=this.coinsSelect},methods:{handleInput:function(){this.$emit("input",this.coin)},stringToHSL:function(t){return Object(b["e"])(t)},filterFn:function(t,e){var n=this;e(""!==t?function(){var e=t.toLowerCase();n.options=n.coinsSelect.filter((function(t){return t.value.toLowerCase().indexOf(e)>-1})),document.querySelector(".q-select__dialog .scroll").scrollTop=0}:function(){n.options=n.coinsSelect})}},computed:C({},Object(v["b"])(["coinsSelect","coinsInfo"])),watch:{coin:function(){this.handleInput()},value:function(t){this.coin=t}}},O=x,S=n("2877"),w=n("eebe"),T=n.n(w),q=n("ddd8"),j=n("66e5"),E=n("4074"),P=n("cb32"),B=n("0170"),$=Object(S["a"])(O,g,_,!1,null,null,null),k=$.exports;function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}T()($,"components",{QSelect:q["a"],QItem:j["a"],QItemSection:E["a"],QAvatar:P["a"],QItemLabel:B["a"]});var D={name:"Convert",components:{BalanceSelect:d["a"],CoinsSelect:k},data:function(){return{convertTab:"sell",txType:"SELL",coin:null,coinTo:null,amount:null,amountBig:null,amountIsError:!1,amountErrorMsg:null,validate:!1,validateError:null,commission:Object(m["e"])(p["b"].SELL),commissionCoin:"BIP",confirmConvert:!1,resultBuy:0,resultSell:0}},mounted:function(){this.setDefaultCoin()},methods:{prettyNumber:function(t,e){return Object(b["d"])(t,e)},setDefaultCoin:function(){f()(this.balanceSelect[0].amount).gt(0)?this.coin=this.balanceSelect[0]:this.coin=this.balanceSelect[1]?this.balanceSelect[1]:this.balanceSelect[0]},maxAmount:function(){this.amount=this.coin?f()(this.coin.amount).toString():null},clearAll:function(){this.coin=null,this.coinTo=null,this.amount=null,this.amountBig=null,this.confirmConvert=!1,this.resultBuy=0,this.resultSell=0,this.validate=!1,this.txError="",this.txType=this.convertTab.toUpperCase(),this.setDefaultCoin()},makeTxData:function(){var t={type:this.txType,data:{coinToSell:this.coin.value,coinToBuy:this.coinTo.value},gasCoin:this.commissionCoin};return"SELL"===this.txType?f()(this.amount).eq(this.coin.amount)||f()(this.coin.amount).lt(this.amountBig.plus(this.commission))?t.type="SELL_ALL":t.data.valueToSell=this.amountBig.toString():"BUY"===this.txType&&(t.data.valueToBuy=this.amountBig.toString()),t},estimateTx:function(){var t=this;return u()(c.a.mark((function e(){var n,o,a;return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="BUY"===t.txType?"estimateCoinBuy":"estimateCoinSell",o={coinToSell:t.coin.value,coinToBuy:t.coinTo.value},"estimateCoinBuy"===n?o.valueToBuy=t.amountBig.toString():"estimateCoinSell"===n&&(o.valueToSell=t.amountBig.toString()),e.prev=3,e.next=6,t.minterGate[n](o);case 6:a=e.sent,t.commissionCoin=t.coin.value,t.commission=a.commission,t.resultSell=a.will_get,t.resultBuy=a.will_pay,a.will_pay&&f()(a.will_pay).gt(f()(t.coin.amount))&&(t.validate=!1,t.amountIsError=!0,t.amountErrorMsg=t.$t("Not enough")+" ".concat(f()(a.will_pay).minus(t.coin.amount).plus(a.commission).round(3,0).toString()," ").concat(t.coin.value)),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))()},valifateForm:function(){this.amountIsError=!1,this.amountErrorMsg=null,this.validate=!0,this.validateError=null,this.amountBig=this.amount?f()(this.amount.replace(",",".")):f()(0),this.coin&&this.coinTo&&this.coin.value===this.coinTo.value&&(this.validate=!1,this.txError=this.$t("Сhoose different coins")),this.coin&&f()(this.amountBig).gt(f()(this.coin.amount))&&(this.validate=!1,this.amountIsError=!0,this.amountErrorMsg=this.$t("Not enough")+" ".concat(f()(this.amountBig).minus(this.coin.amount).round(3,0).toString()," ").concat(this.coin.value)),this.amount&&this.amount.length||(this.validate=!1),this.amountBig.lte(0)&&(this.validate=!1),this.coin&&this.coinTo||(this.validate=!1),this.validate&&this.estimateTx()},senderConvert:function(){var t=this,e=this.makeTxData();console.log(e),this.$store.dispatch("SENDER",e).then((function(e){t.$q.notify({message:t.$t("Transaction successful"),icon:"tag_faces",color:"teal"}),t.clearAll(),setTimeout((function(){t.$store.dispatch("FETCH_BALANCE").then((function(e){t.setDefaultCoin()}))}),2e3)})).catch((function(e){console.log(e.error),t.$q.notify({message:e.error.message,icon:"report_problem",color:"negative"})}))}},computed:Q({},Object(v["c"])({minterGate:function(t){return t.wallet.minterGate}}),{},Object(v["b"])(["balanceSelect","coinsSelect","balanceObj","coinsInfo"])),watch:{amount:function(){this.valifateForm()},coin:function(){this.valifateForm()},coinTo:function(){this.valifateForm()},convertTab:function(){this.clearAll()}}},L=D,A=n("9989"),N=n("429b"),M=n("7460"),F=n("adad"),U=n("823b"),H=n("27f9"),Y=n("9c40"),z=n("0016"),G=n("24e8"),J=n("f09f"),R=n("a370"),K=n("eb85"),V=n("4b7e"),W=n("7f67"),X=Object(S["a"])(L,o,a,!1,null,null,null);e["default"]=X.exports;T()(X,"components",{QPage:A["a"],QTabs:N["a"],QTab:M["a"],QTabPanels:F["a"],QTabPanel:U["a"],QInput:H["a"],QBtn:Y["a"],QIcon:z["a"],QDialog:G["a"],QCard:J["a"],QCardSection:R["a"],QSeparator:K["a"],QCardActions:V["a"]}),T()(X,"directives",{ClosePopup:W["a"]})}}]);