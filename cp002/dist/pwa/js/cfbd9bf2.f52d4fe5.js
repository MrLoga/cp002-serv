(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cfbd9bf2"],{"158a":function(t,e,o){"use strict";o("2330"),o("b671");var n=o("3843");o("f654");o("9dcd"),o("399f");var a=o("9a12");var i=o("dca1");function s(t,{payload:e,coinSymbol:o,multisendCount:s}={}){if(Object(a["isHexString"])(t)||(t=`0x${Object(a["padToEven"])(t.toString(16)).toUpperCase()}`),t===i["g"]&&!(s>=1))throw new Error("`multisendCount` should be positive integer when tx type is TX_TYPE_MULTISEND");let r;r=e?n["Buffer"].isBuffer(e)?e.length:Object(a["getBinarySize"])(e.toString()):0;const u=c[t],m=.001,b=1/m,p=t===i["g"]?5*(s-1):0,y=t===i["b"]?l(o):0;return(u+2*r+p)/b+y}function l(t){return r[t&&t.length]||100}const r={3:1e6,4:1e5,5:1e4,6:1e3},c={[i["k"]]:10,[i["i"]]:100,[i["j"]]:100,[i["a"]]:100,[i["b"]]:0,[i["d"]]:1e4,[i["e"]]:200,[i["n"]]:200,[i["h"]]:30,[i["m"]]:100,[i["l"]]:100,[i["c"]]:100,[i["g"]]:10,[i["f"]]:1e4};o.d(e,"a",(function(){return s}))},3843:function(t,e,o){var n=o("b639"),a=n.Buffer;function i(t,e){for(var o in t)e[o]=t[o]}function s(t,e,o){return a(t,e,o)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s),s.prototype=Object.create(a.prototype),i(a,s),s.from=function(t,e,o){if("number"===typeof t)throw new TypeError("Argument must not be a number");return a(t,e,o)},s.alloc=function(t,e,o){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=a(t);return void 0!==e?"string"===typeof o?n.fill(e,o):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return a(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},f1da:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",[o("q-tabs",{staticClass:"bg-teal text-white shadow-2",attrs:{"inline-label":"","active-color":"white","indicator-color":"white"},model:{value:t.convertTab,callback:function(e){t.convertTab=e},expression:"convertTab"}},[o("q-tab",{attrs:{name:"SellTxParams",label:t.$t("Exchange")}}),o("q-tab",{attrs:{name:"BuyTxParams",label:t.$t("Get")}})],1),o("q-tab-panels",{attrs:{animated:""},model:{value:t.convertTab,callback:function(e){t.convertTab=e},expression:"convertTab"}},[o("q-tab-panel",{attrs:{name:"SellTxParams"}},[o("form",{staticClass:"q-gutter-md",on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.confirmConvert=!0}}},[o("q-select",{attrs:{outlined:"",label:t.$t("Coin you have"),"bottom-slots":"",behavior:"dialog","display-value":t.coinSymbol&&t.coinSymbol.coin?"<b>"+t.coinSymbol.coin+"</b> ("+t.coinSymbol.amountPretty+")":"",options:t.balancesSelect,hint:t.coinSymbol&&t.coinSymbol.coin?t.coinsJSON[t.coinSymbol.coin].name:""},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(e.opt.coin),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(e.opt.coin.charAt(0).toUpperCase())+"\n                ")])],1),o("q-item-section",[o("q-item-label",[o("b",[t._v(t._s(e.opt.coin))]),t._v(" ("+t._s(e.opt.amountPretty)+")")]),o("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(t.coinsJSON[e.opt.coin].name))])],1)],1)]}}]),model:{value:t.coinSymbol,callback:function(e){t.coinSymbol=e},expression:"coinSymbol"}}),o("q-input",{attrs:{outlined:"",debounce:"250",label:t.$t("Amount"),rules:[function(t){return!!t.toString().length||"Field is required"},function(e){return t.coinSymbol.amount>=e||"Not enough "+t.coinSymbol.value}]},scopedSlots:t._u([{key:"after",fn:function(){return[o("q-btn",{attrs:{round:"","no-caps":"",flat:"",label:"Max"},on:{click:t.maxAmountSell}})]},proxy:!0}]),model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}}),o("div",{staticClass:"q-mt-none",staticStyle:{"text-align":"center"}},[o("q-icon",{attrs:{name:"arrow_downward",size:"md"}})],1),o("q-select",{attrs:{outlined:"",label:t.$t("Coin you want"),"use-input":"","input-debounce":"250",behavior:"dialog","display-value":t.coinSymbolTo&&t.coinSymbolTo.value?"<b>"+t.coinSymbolTo.value+"</b> (crr: "+t.coinSymbolTo.crr+")":"",options:t.options,hint:t.coinSymbolTo&&t.coinSymbolTo.value?t.coinSymbolTo.name:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                "+t._s(t.$t("No results"))+"\n              ")])],1)]},proxy:!0},{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(e.opt.symbol),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(e.opt.symbol.charAt(0).toUpperCase())+"\n                ")])],1),o("q-item-section",[o("q-item-label",[o("b",[t._v(t._s(e.opt.symbol))]),t._v(" (crr: "+t._s(e.opt.crr)+")")]),o("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(e.opt.name))])],1)],1)]}}]),model:{value:t.coinSymbolTo,callback:function(e){t.coinSymbolTo=e},expression:"coinSymbolTo"}}),o("div",[o("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!t.txReady,label:t.$t("Exchange")}})],1),0!=t.resultSell?o("div",[o("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.$t("You will get")))]),t._v(" \n          "),o("span",{staticClass:"text-h6"},[t._v(t._s(t.pretty(t.resultSell,3)))]),t._v(" \n          "),o("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.coinSymbolTo.value.toUpperCase()))])]):t._e(),!t.txReady&&t.txError?o("div",{staticClass:"text-negative"},[t._v("\n          "+t._s(t.txError)+"\n        ")]):t._e(),o("div",{class:"text-grey-7 "+(0!=t.resultSell?"q-mt-none":"")},[t._v("\n          "+t._s(t.$t("Transaction fee"))+": "+t._s(t.feeSellBase)+" BIP\n        ")])],1)]),o("q-tab-panel",{attrs:{name:"BuyTxParams"}},[o("form",{staticClass:"q-gutter-md",on:{submit:function(e){e.preventDefault(),e.stopPropagation(),t.confirmConvert=!0}}},[o("q-select",{attrs:{outlined:"",label:t.$t("Coin you want"),"use-input":"","input-debounce":"250",behavior:"dialog","display-value":t.coinSymbolTo&&t.coinSymbolTo.value?"<b>"+t.coinSymbolTo.value+"</b> (crr: "+t.coinSymbolTo.crr+")":"",options:t.options,hint:t.coinSymbolTo&&t.coinSymbolTo.value?t.coinSymbolTo.name:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[o("q-item",[o("q-item-section",{staticClass:"text-grey"},[t._v("\n                "+t._s(t.$t("No results"))+"\n              ")])],1)]},proxy:!0},{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(e.opt.symbol),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(e.opt.symbol.charAt(0).toUpperCase())+"\n                ")])],1),o("q-item-section",[o("q-item-label",[o("b",[t._v(t._s(e.opt.symbol))]),t._v(" (crr: "+t._s(e.opt.crr)+")")]),o("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(e.opt.name))])],1)],1)]}}]),model:{value:t.coinSymbolTo,callback:function(e){t.coinSymbolTo=e},expression:"coinSymbolTo"}}),o("q-input",{attrs:{outlined:"",debounce:"250",label:t.$t("Amount"),rules:[function(t){return!!t.toString().length||"Field is required"}]},model:{value:t.amount,callback:function(e){t.amount=t._n(e)},expression:"amount"}}),o("div",{staticClass:"q-mt-none",staticStyle:{"text-align":"center"}},[o("q-icon",{attrs:{name:"arrow_upward",size:"md"}})],1),o("q-select",{attrs:{outlined:"",label:t.$t("Coin you have"),"bottom-slots":"",behavior:"dialog","display-value":t.coinSymbol&&t.coinSymbol.coin?"<b>"+t.coinSymbol.coin+"</b> ("+t.coinSymbol.amountPretty+")":"",options:t.balancesSelect,hint:t.coinSymbol&&t.coinSymbol.coin?t.coinsJSON[t.coinSymbol.coin].name:""},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",{attrs:{avatar:""}},[o("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+t.stringToHSL(e.opt.coin),attrs:{"text-color":"white"}},[t._v("\n                  "+t._s(e.opt.coin.charAt(0).toUpperCase())+"\n                ")])],1),o("q-item-section",[o("q-item-label",[o("b",[t._v(t._s(e.opt.coin))]),t._v(" ("+t._s(e.opt.amountPretty)+")")]),o("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[t._v(t._s(t.coinsJSON[e.opt.coin].name))])],1)],1)]}}]),model:{value:t.coinSymbol,callback:function(e){t.coinSymbol=e},expression:"coinSymbol"}}),o("div",[o("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!t.txReady,label:t.$t("Exchange")}})],1),0!=t.resultBuy?o("div",[o("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.$t("You will pay")))]),t._v(" \n          "),o("span",{staticClass:"text-h6"},[t._v(t._s(t.pretty(t.resultBuy,3)))]),t._v(" \n          "),o("span",{staticClass:"text-subtitle1"},[t._v(t._s(t.coinSymbol.value.toUpperCase()))])]):t._e(),!t.txReady&&t.txError?o("div",{staticClass:"text-negative"},[t._v("\n          "+t._s(t.txError)+"\n        ")]):t._e(),o("div",{class:"text-grey-7 "+(0!=t.resultBuy?"q-mt-none":"")},[t._v("\n          Transaction fee: "+t._s(t.feeBuyBase)+" BIP\n        ")])],1)])],1),t.txReady?o("q-dialog",{attrs:{persistent:"","full-width":"","transition-show":"scale","transition-hide":"scale"},model:{value:t.confirmConvert,callback:function(e){t.confirmConvert=e},expression:"confirmConvert"}},[o("q-card",[o("q-card-section",{staticStyle:{"text-align":"center"}},[o("div",{staticClass:"text-h5 text-grey-7"},[t._v(t._s(t.$t("You're Exchange")))]),o("div",{staticClass:"text-h5"},[t._v(t._s(t.numberSpaces(t.pretty(t.amount,3)))+" "),o("span",{staticClass:"text-h6"},[t._v(t._s(t.coinSymbol.value))])]),o("div",{staticClass:"text-grey-7"},[t._v(t._s(t.$t("to")))]),o("div",{staticClass:"text-h5"},[t._v(t._s(t.numberSpaces(t.pretty("SellTxParams"===t.convertTab?t.resultSell:t.resultBuy,3)))+" "),o("span",{staticClass:"text-h6"},[t._v(t._s(t.coinSymbolTo.value))])])]),o("q-separator",{attrs:{inset:""}}),o("q-card-actions",{attrs:{align:"around"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Cancel"),color:"red"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:t.$t("Accept"),color:"primary"},on:{click:t.senderConvert}})],1)],1)],1):t._e()],1)},a=[],i=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("06db"),o("456d"),o("a481"),o("c47a")),s=o.n(i),l=o("158a"),r=o("6ff6"),c=o("2f62"),u=o("ed08"),m=o("9dcd"),b=o.n(m);function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function y(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(o,!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(o).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var v={name:"Convert",components:{},data:function(){return{convertTab:"SellTxParams",coinSymbol:null,coinSymbolTo:null,amount:0,options:[],confirmConvert:!1,txReady:!1,txError:"",resultBuy:0,resultSell:0,feeBuy:Object(l["a"])(r["q"]),feeBuyBase:Object(l["a"])(r["q"]),feeSell:Object(l["a"])(r["y"]),feeSellBase:Object(l["a"])(r["y"])}},computed:y({},Object(c["c"])({balancesSelect:function(t){return t.api.balancesSelect},coinsSelect:function(t){return t.api.coinsSelect},coinsJSON:function(t){return t.api.coinsJSON},minterGate:function(t){return t.wallet.minterGate}}),{},Object(c["b"])([])),methods:{pretty:function(t,e){return Object(u["b"])(t,e)},numberSpaces:function(t){return Object(u["a"])(t)},stringToHSL:function(t){return Object(u["c"])(t)},filterFn:function(t,e){var o=this;e(""!==t?function(){var e=t.toLowerCase();o.options=o.coinsSelect.filter((function(t){return t.symbol.toLowerCase().indexOf(e)>-1}))}:function(){o.options=o.coinsSelect})},maxAmountSell:function(){if(!this.coinSymbol||!this.coinSymbol.value)return!1;this.amount=new b.a(this.coinSymbol.amount.replace(",",".")),"BIP"===this.coinSymbol.value?this.amount=new b.a(this.coinSymbol.amount.replace(",",".")).minus(this.feeSellBase):this.amount=new b.a(this.coinSymbol.amount.replace(",","."))},senderConvert:function(){var t=this,e={txAction:this.convertTab,coinFrom:this.coinSymbol.value,coinTo:this.coinSymbolTo.value,feeCoinSymbol:"BIP",message:""};"BuyTxParams"===this.convertTab?e.buyAmount=this.amount:"SellTxParams"===this.convertTab&&(e.sellAmount=this.amount),this.$store.dispatch("SENDER",e).then((function(e){t.$q.notify({message:t.$t("Transaction successful"),icon:"tag_faces",color:"teal"}),t.$store.dispatch("FETCH_BALANCE"),t.clearAll()})).catch((function(e){t.$q.notify({message:e,icon:"report_problem",color:"negative"})}))},clearAll:function(){this.coinSymbol=null,this.coinSymbolTo=null,this.amount=0,this.options=[],this.confirmConvert=!1,this.resultBuy=0,this.resultSell=0,this.txReady=!1,this.txError=""},calcBuy:function(){var t=this;if(this.txReady=!1,this.txError="",this.resultBuy=0,this.resultSell=0,this.coinSymbol&&this.coinSymbolTo&&this.coinSymbol.value===this.coinSymbolTo.value)this.txReady=!1,this.txError="Сhoose different coins";else if(this.amount&&this.amount>0&&this.coinSymbol&&this.coinSymbol.value&&this.coinSymbolTo){var e="BuyTxParams"===this.convertTab?"estimateCoinBuy":"estimateCoinSell",o={coinToSell:this.coinSymbol.value,coinToBuy:this.coinSymbolTo.value};"BuyTxParams"===this.convertTab?o.valueToBuy=this.amount:"SellTxParams"===this.convertTab&&(o.valueToSell=this.amount),this.minterGate[e](o).then((function(e){t.feeSell=e.commission,t.resultSell=e.will_get,t.resultBuy=e.will_pay,t.txReady=!0,"BuyTxParams"===t.convertTab&&(b()(t.resultBuy).lte(b()(t.coinSymbol.amount))?t.txReady=!0:(t.txReady=!1,t.txError="Not enough ".concat(t.pretty(b()(t.resultBuy).minus(t.coinSymbol.amount),3)," ").concat(t.coinSymbol.value)))})).catch((function(e){t.txReady=!1,t.txError=e.log}))}else this.txReady=!1}},created:function(){},watch:{amount:function(){this.calcBuy()},coinSymbol:function(){this.calcBuy()},coinSymbolTo:function(){this.calcBuy()},convertTab:function(){this.clearAll()}}},f=v,S=o("2877"),d=o("fe09"),h=Object(S["a"])(f,n,a,!1,null,null,null);e["default"]=h.exports;h.options.components=Object.assign({QPage:d["r"],QTabs:d["E"],QTab:d["B"],QTabPanels:d["D"],QTabPanel:d["C"],QSelect:d["w"],QItem:d["m"],QItemSection:d["o"],QAvatar:d["b"],QItemLabel:d["n"],QInput:d["l"],QBtn:d["d"],QIcon:d["k"],QDialog:d["h"],QCard:d["e"],QCardSection:d["g"],QSeparator:d["x"],QCardActions:d["f"]},h.options.components||{}),h.options.directives=Object.assign({ClosePopup:d["a"]},h.options.directives||{})}}]);