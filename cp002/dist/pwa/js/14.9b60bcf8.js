(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{f1da:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=this,o=e.$createElement,n=e._self._c||o;return n("q-page",[n("q-tabs",{staticClass:"bg-teal text-white shadow-2",attrs:{"inline-label":"","active-color":"white","indicator-color":"white"},model:{value:e.convertTab,callback:function(t){e.convertTab=t},expression:"convertTab"}},[n("q-tab",{attrs:{name:"SellTxParams",label:e.$t("Exchange")}}),n("q-tab",{attrs:{name:"BuyTxParams",label:e.$t("Get")}})],1),n("q-tab-panels",{attrs:{animated:""},model:{value:e.convertTab,callback:function(t){e.convertTab=t},expression:"convertTab"}},[n("q-tab-panel",{attrs:{name:"SellTxParams"}},[n("form",{staticClass:"q-gutter-md",on:{submit:function(t){t.preventDefault(),t.stopPropagation(),e.confirmConvert=!0}}},[n("q-select",{attrs:{outlined:"",label:e.$t("Coin you have"),"bottom-slots":"",behavior:"dialog","display-value":e.coinSymbol&&e.coinSymbol.coin?"<b>"+e.coinSymbol.coin+"</b> ("+e.coinSymbol.amountPretty+")":"",options:e.balancesSelect,hint:e.coinSymbol&&e.coinSymbol.coin?e.coinsJSON[e.coinSymbol.coin].name:""},scopedSlots:e._u([{key:"option",fn:function(t){return[n("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+e.stringToHSL(t.opt.coin),attrs:{"text-color":"white"}},[e._v("\n                  "+e._s(t.opt.coin.charAt(0).toUpperCase())+"\n                ")])],1),n("q-item-section",[n("q-item-label",[n("b",[e._v(e._s(t.opt.coin))]),e._v(" ("+e._s(t.opt.amountPretty)+")")]),n("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[e._v(e._s(e.coinsJSON[t.opt.coin].name))])],1)],1)]}}]),model:{value:e.coinSymbol,callback:function(t){e.coinSymbol=t},expression:"coinSymbol"}}),n("q-input",{attrs:{type:"number",step:"any",outlined:"",clearable:"",debounce:"250",label:e.$t("Amount"),rules:[function(t){return t&&!!t.toString().length||e.$t("Field is required")},function(o){return e.Big(e.Big(e.coinSymbol.amount).minus(t.feeSellBase)).gte(e.Big(o.toString().replace(",",".")))||e.$t("Not enough")+" "+e.coinSymbol.value}]},scopedSlots:e._u([{key:"after",fn:function(){return[n("q-btn",{attrs:{round:"","no-caps":"",flat:"",label:"Max"},on:{click:e.maxAmountSell}})]},proxy:!0}]),model:{value:e.amountString,callback:function(t){e.amountString=t},expression:"amountString"}}),n("div",{staticClass:"q-mt-none",staticStyle:{"text-align":"center"}},[n("q-icon",{attrs:{name:"arrow_downward",size:"md"}})],1),n("q-select",{attrs:{outlined:"",label:e.$t("Coin you want"),"use-input":"","input-debounce":"250",behavior:"dialog","display-value":e.coinSymbolTo&&e.coinSymbolTo.value?"<b>"+e.coinSymbolTo.value+"</b> (crr: "+e.coinSymbolTo.crr+")":"",options:e.options,hint:e.coinSymbolTo&&e.coinSymbolTo.value?e.coinSymbolTo.name:""},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[e._v("\n                "+e._s(e.$t("No results"))+"\n              ")])],1)]},proxy:!0},{key:"option",fn:function(t){return[n("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+e.stringToHSL(t.opt.symbol),attrs:{"text-color":"white"}},[e._v("\n                  "+e._s(t.opt.symbol.charAt(0).toUpperCase())+"\n                ")])],1),n("q-item-section",[n("q-item-label",[n("b",[e._v(e._s(t.opt.symbol))]),e._v(" (crr: "+e._s(t.opt.crr)+")")]),n("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[e._v(e._s(t.opt.name))])],1)],1)]}}]),model:{value:e.coinSymbolTo,callback:function(t){e.coinSymbolTo=t},expression:"coinSymbolTo"}}),n("div",[n("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!e.txReady,label:e.$t("Exchange")}})],1),0!=e.resultSell?n("div",[n("span",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("You will get")))]),e._v(" \n          "),n("span",{staticClass:"text-h6"},[e._v(e._s(e.pretty(e.resultSell,3)))]),e._v(" \n          "),n("span",{staticClass:"text-subtitle1"},[e._v(e._s(e.coinSymbolTo.value.toUpperCase()))])]):e._e(),!e.txReady&&e.txError?n("div",{staticClass:"text-negative"},[e._v("\n          "+e._s(e.txError)+"\n        ")]):e._e(),n("div",{class:"text-grey-7 "+(0!=e.resultSell?"q-mt-none":"")},[e._v("\n          "+e._s(e.$t("Transaction fee"))+": "+e._s(e.feeSellBase)+" BIP\n        ")])],1)]),n("q-tab-panel",{attrs:{name:"BuyTxParams"}},[n("form",{staticClass:"q-gutter-md",on:{submit:function(t){t.preventDefault(),t.stopPropagation(),e.confirmConvert=!0}}},[n("q-select",{attrs:{outlined:"",label:e.$t("Coin you want"),"use-input":"","input-debounce":"250",behavior:"dialog","display-value":e.coinSymbolTo&&e.coinSymbolTo.value?"<b>"+e.coinSymbolTo.value+"</b> (crr: "+e.coinSymbolTo.crr+")":"",options:e.options,hint:e.coinSymbolTo&&e.coinSymbolTo.value?e.coinSymbolTo.name:""},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[n("q-item",[n("q-item-section",{staticClass:"text-grey"},[e._v("\n                "+e._s(e.$t("No results"))+"\n              ")])],1)]},proxy:!0},{key:"option",fn:function(t){return[n("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+e.stringToHSL(t.opt.symbol),attrs:{"text-color":"white"}},[e._v("\n                  "+e._s(t.opt.symbol.charAt(0).toUpperCase())+"\n                ")])],1),n("q-item-section",[n("q-item-label",[n("b",[e._v(e._s(t.opt.symbol))]),e._v(" (crr: "+e._s(t.opt.crr)+")")]),n("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[e._v(e._s(t.opt.name))])],1)],1)]}}]),model:{value:e.coinSymbolTo,callback:function(t){e.coinSymbolTo=t},expression:"coinSymbolTo"}}),n("q-input",{attrs:{type:"number",outlined:"",debounce:"250",label:e.$t("Amount")},model:{value:e.amountString,callback:function(t){e.amountString=e._n(t)},expression:"amountString"}}),n("div",{staticClass:"q-mt-none",staticStyle:{"text-align":"center"}},[n("q-icon",{attrs:{name:"arrow_upward",size:"md"}})],1),n("q-select",{attrs:{outlined:"",label:e.$t("Coin you have"),"bottom-slots":"",behavior:"dialog","display-value":e.coinSymbol&&e.coinSymbol.coin?"<b>"+e.coinSymbol.coin+"</b> ("+e.coinSymbol.amountPretty+")":"",options:e.balancesSelect,hint:e.coinSymbol&&e.coinSymbol.coin?e.coinsJSON[e.coinSymbol.coin].name:""},scopedSlots:e._u([{key:"option",fn:function(t){return[n("q-item",e._g(e._b({},"q-item",t.itemProps,!1),t.itemEvents),[n("q-item-section",{attrs:{avatar:""}},[n("q-avatar",{staticClass:"balance__coin-avatar",style:"background-color: "+e.stringToHSL(t.opt.coin),attrs:{"text-color":"white"}},[e._v("\n                  "+e._s(t.opt.coin.charAt(0).toUpperCase())+"\n                ")])],1),n("q-item-section",[n("q-item-label",[n("b",[e._v(e._s(t.opt.coin))]),e._v(" ("+e._s(t.opt.amountPretty)+")")]),n("q-item-label",{staticClass:"one-line",attrs:{caption:""}},[e._v(e._s(e.coinsJSON[t.opt.coin].name))])],1)],1)]}}]),model:{value:e.coinSymbol,callback:function(t){e.coinSymbol=t},expression:"coinSymbol"}}),n("div",[n("q-btn",{staticClass:"full-width",attrs:{type:"submit",color:"teal",size:"16px",icon:"compare_arrows",disabled:!e.txReady,label:e.$t("Exchange")}})],1),0!=e.resultBuy?n("div",[n("span",{staticClass:"text-subtitle1"},[e._v(e._s(e.$t("You will pay")))]),e._v(" \n          "),n("span",{staticClass:"text-h6"},[e._v(e._s(e.pretty(e.resultBuy,3)))]),e._v(" \n          "),n("span",{staticClass:"text-subtitle1"},[e._v(e._s(e.coinSymbol.value.toUpperCase()))])]):e._e(),!e.txReady&&e.txError?n("div",{staticClass:"text-negative"},[e._v("\n          "+e._s(e.txError)+"\n        ")]):e._e(),n("div",{class:"text-grey-7 "+(0!=e.resultBuy?"q-mt-none":"")},[e._v("\n          Transaction fee: "+e._s(e.feeBuyBase)+" BIP\n        ")])],1)])],1),e.txReady?n("q-dialog",{attrs:{persistent:"","full-width":"","transition-show":"scale","transition-hide":"scale"},model:{value:e.confirmConvert,callback:function(t){e.confirmConvert=t},expression:"confirmConvert"}},[n("q-card",[n("q-card-section",{staticStyle:{"text-align":"center"}},[n("div",{staticClass:"text-h5 text-grey-7"},[e._v(e._s(e.$t("Youre Exchange")))]),n("div",{staticClass:"text-h5"},[e._v(e._s(e.numberSpaces(e.pretty(e.amount,3)))+" "),n("span",{staticClass:"text-h6"},[e._v(e._s(e.coinSymbol.value))])]),n("div",{staticClass:"text-grey-7"},[e._v(e._s(e.$t("to")))]),n("div",{staticClass:"text-h5"},[e._v(e._s(e.numberSpaces(e.pretty("SellTxParams"===e.convertTab?e.resultSell:e.resultBuy,3)))+" "),n("span",{staticClass:"text-h6"},[e._v(e._s(e.coinSymbolTo.value))])])]),n("q-separator",{attrs:{inset:""}}),n("q-card-actions",{attrs:{align:"around"}},[n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("Cancel"),color:"red"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:e.$t("Accept"),color:"primary"},on:{click:e.senderConvert}})],1)],1)],1):e._e()],1)},a=[],i=(o("8e6e"),o("8a81"),o("ac6a"),o("cadf"),o("456d"),o("6b54"),o("06db"),o("a481"),o("c47a")),s=o.n(i),l=o("158a"),c=o("6ff6"),r=o("2f62"),u=o("ed08"),m=o("9dcd"),b=o.n(m);function y(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?y(Object(o),!0).forEach((function(e){s()(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var v={name:"Convert",components:{},data:function(){return{convertTab:"SellTxParams",coinSymbol:null,coinSymbolTo:null,amountString:null,amount:null,options:[],confirmConvert:!1,txReady:!1,txError:"",resultBuy:0,resultSell:0,feeBuy:Object(l["e"])(c["b"]),feeBuyBase:Object(l["e"])(c["b"]),feeSell:Object(l["e"])(c["d"]),feeSellBase:Object(l["e"])(c["d"])}},computed:p({},Object(r["c"])({coinsSelect:function(t){return t.api.coinsSelect},coinsJSON:function(t){return t.api.coinsJSON},minterGate:function(t){return t.wallet.minterGate}}),{},Object(r["b"])(["balancesSelect"])),methods:{Big:function(t){return b()(t)},pretty:function(t,e){return Object(u["b"])(t,e)},numberSpaces:function(t){return Object(u["a"])(t)},stringToHSL:function(t){return Object(u["d"])(t)},filterFn:function(t,e){var o=this;e(""!==t?function(){var e=t.toLowerCase();o.options=o.coinsSelect.filter((function(t){return t.symbol.toLowerCase().indexOf(e)>-1}))}:function(){o.options=o.coinsSelect})},maxAmountSell:function(){if(!this.coinSymbol||!this.coinSymbol.value)return!1;this.amount=new b.a(this.coinSymbol.amount.replace(",",".")),"BIP"===this.coinSymbol.value?this.amount=new b.a(this.coinSymbol.amount.replace(",",".")).minus(this.feeSellBase):this.amount=new b.a(this.coinSymbol.amount.replace(",",".")),this.amountString=this.amount.toString()},senderConvert:function(){var t=this,e={txAction:this.convertTab,coinFrom:this.coinSymbol.value,coinTo:this.coinSymbolTo.value,feeCoinSymbol:"BIP",message:""};"BuyTxParams"===this.convertTab?e.buyAmount=this.amount.toString():"SellTxParams"===this.convertTab&&(e.sellAmount=this.amount.toString()),this.$store.dispatch("SENDER",e).then((function(e){t.$q.notify({message:t.$t("Transaction successful"),icon:"tag_faces",color:"teal"}),t.$store.dispatch("FETCH_BALANCE"),t.clearAll()})).catch((function(e){t.$q.notify({message:e,icon:"report_problem",color:"negative"})}))},clearAll:function(){this.coinSymbol=null,this.coinSymbolTo=null,this.amount=null,this.amountString=null,this.options=[],this.confirmConvert=!1,this.resultBuy=0,this.resultSell=0,this.txReady=!1,this.txError=""},calcBuy:function(){var t=this;this.txReady=!1,this.txError="",this.resultBuy=0,this.resultSell=0;var e=this.amountString;if(this.amount=b()(e?e.toString().replace(",","."):0),this.coinSymbol&&this.coinSymbolTo&&this.coinSymbol.value===this.coinSymbolTo.value)this.txReady=!1,this.txError=this.$t("Сhoose different coins");else if(this.amount&&this.amount.gt(0)&&this.coinSymbol&&this.coinSymbol.value&&this.coinSymbolTo){var o="BuyTxParams"===this.convertTab?"estimateCoinBuy":"estimateCoinSell",n={coinToSell:this.coinSymbol.value,coinToBuy:this.coinSymbolTo.value};"BuyTxParams"===this.convertTab?n.valueToBuy=this.amount:"SellTxParams"===this.convertTab&&(n.valueToSell=this.amount),this.minterGate[o](n).then((function(e){t.feeSell=e.commission,t.resultSell=e.will_get,t.resultBuy=e.will_pay,t.txReady=!0,"BuyTxParams"===t.convertTab&&(b()(t.resultBuy).lte(t.coinSymbol.amount)?t.txReady=!0:(t.txReady=!1,t.txError=t.$t("Not enough")+" ".concat(t.pretty(b()(t.resultBuy).minus(t.coinSymbol.amount),3)," ").concat(t.coinSymbol.value)))})).catch((function(e){t.txReady=!1,t.txError=e.log}))}else this.txReady=!1}},created:function(){},watch:{amountString:function(t){this.calcBuy()},coinSymbol:function(){this.calcBuy()},coinSymbolTo:function(){this.calcBuy()},convertTab:function(){this.clearAll()}}},S=v,d=o("2877"),f=o("eebe"),h=o.n(f),_=o("9989"),x=o("429bb"),g=o("7460"),T=o("adad"),q=o("823b"),C=o("ddd8"),w=o("66e5"),B=o("4074"),P=o("cb32"),O=o("0170"),$=o("27f9"),k=o("9c40"),E=o("0016"),j=o("24e8"),A=o("f09f"),Q=o("a370"),R=o("eb85"),N=o("4b7e"),I=o("7f67"),L=Object(d["a"])(S,n,a,!1,null,null,null);e["default"]=L.exports;h()(L,"components",{QPage:_["a"],QTabs:x["a"],QTab:g["a"],QTabPanels:T["a"],QTabPanel:q["a"],QSelect:C["a"],QItem:w["a"],QItemSection:B["a"],QAvatar:P["a"],QItemLabel:O["a"],QInput:$["a"],QBtn:k["a"],QIcon:E["a"],QDialog:j["a"],QCard:A["a"],QCardSection:Q["a"],QSeparator:R["a"],QCardActions:N["a"]}),h()(L,"directives",{ClosePopup:I["a"]})}}]);